# docker box definition
box: maven:latest
#
# # defining the dev pipeline
dev:
   steps:
     - script:
           name: Exporting_proxy
           code: |
                export http_proxy=http://www-proxy.us.oracle.com:80
                export https_proxy=http://www-proxy.us.oracle.com:80
     - xenoterracide/maven:
        settings: settings.xml
        goals: package
#        goals: test
       # A step that executes `gradle bootRun` command
     #- alianza/maven:
#           goals: -Dmaven.test.failure.ignore=false package
#     - install-packages:
#        packages: maven:3.0.5
build:
   steps:
      - xenoterracide/maven:
         goals: package

maven-test:
   steps:
    - xenoterracide/maven:
        type: maven test
        goals: test

push-to-dockerhub:
  steps:
    # Push to docker repo
    - internal/docker-push:
        username: $DOCKER_USERNAME
        password: $DOCKER_PASSWORD
        tag: latest
        repository: $DOCKER_REPOSITORY
        registry: $DOCKER_REGISTRY

deploy-aws:
  steps:
  - darthtrevino/eb-deploy-s3:
      access-key: $AWS_KEY_ID
      secret-key: $AWS_KEY_SECRET
      app-name: <enter app name>
      env-name: $ENVIRONMENT
#      version-label: <enter version label>
      region: $AWS_REGION
      s3-bucket: $AWS_S3_BUCKET_NAME
#      s3-key: <enter file name>
#  - script:
#       name: Copy      
